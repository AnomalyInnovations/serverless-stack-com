The general idea is to deploy each of your environments to a separate AWS account. We find that is an overkill for most team. What seems to work for many teams we talk to is:

- One account for the Production environment. You want to apply very strict access permission to this account.
- One account for **EACH** Staging environment. If you have multiple staging environment ie. `preprod`, `qa`, `uat``, etc, use a separate account for each. You don't want to have multiple Staging environments share the same account because each Staging account setup needs to mirror the Production as much as possible.
- One account for **ALL** Development environments. All feature and hot fix environments share the same AWS account. You will have many Development environments, many will be very short-lived. Creating a temporary AWS account for each environment and tearing it down after the change is merged into master is an overkill, especially when you need to push a quick hotfix. Also as we mentioned in the [How to organize your services] chapter, you have 1 repo for the infrastructure and 1 repo for the code, and each Development environment most likely do not need their own version of the infrastructure, ie. again when you push a hotfix. You can have multiple API environments all talk to the one Infrastructure environment. And having them all sit inside the same AWS account makes it easy for them to talk to each other without configuring cross account IAM permission. Of course, this is not a hard rule, if you have a major feature release, the feature environment can deserve it's own Infrastructure environment and the entire environment be deployed to a separate account.
- One account for **EACH** Developer environment. Each developer on your team has their own playground account.

At first glance, this might just seem like a whole lot of extra work and you might wonder if the added complexity is worth while. However, this really helps protect your production environment. And we’ll go over the various ways it does so.

### Environment Separation

Imagine that you (or somebody on your team) removes a DynamoDB table or Lambda function in your `serverless.yml`definition. And instead of deploying it to your *dev* environment, you accidentally deploy it to *production*. This happens more often than you think!

To avoid mishaps like these, not every developer on your team should have access or direct access from their terminal to the *production* environment. However, if all your environments are in the same AWS account, you need to carefully craft a detailed IAM policy to restrict/grant access to specific resources for a given environment. This can be hard to do and you are likely to make mistakes.

By keeping each environment in a separate account, you can manage user access on a per account basis. And for *dev* environments you could potentially grant your developers *AdministratorAccess* without worrying about the specific resources.

### Resource Limits

Another benefit of separating environments across AWS accounts is helping you work with AWS’ service limits. You might be familiar with the various hard and soft limits of the AWS services you use. Like the [Lambda’s 75 GB code storage limit](https://docs.aws.amazon.com/lambda/latest/dg/limits.html)or [the total number of S3 buckets per account](https://docs.aws.amazon.com/AmazonS3/latest/dev/BucketRestrictions.html). These limits are applicable on a per account basis. Therefore, an issue with having a single AWS account for all your environments is that, hitting these limits can affect your production environment.

For example, you are likely going to deploy to your *dev* environment an order of magnitude more than to your *production*environment. Meaning that you’ll hit the Lambda code storage limit on your *dev* environment quicker than on *production*. And if you only have one account for all your environments, hitting this limit would critically affect your production builds to fail.

By using multiple AWS accounts, you can be sure that the service limits will not interfere across environments.

### Consolidated Billing

Finally, having separate accounts for your environments is recommended by AWS. And AWS has great support for it as well. In the AWS Organizations console, you can view and manage all the AWS accounts in your root account.

![](https://d33wubrfki0l68.cloudfront.net/9a3f07f072d2a0fb3cb6596b15b1f2d2f2b4783e/b382a/assets/blog/why-deploy-your-serverless-app-into-multiple-aws-accounts/aws-organizations-console-screenshot.png)

You don’t have to setup the billing details for each account. Billing is consolidated to the root account. You can also see a breakdown of usage and cost for each service in each account.

In the next chapter, we are going to look at how to setup these AWS accounts using AWS Organizations.
